{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { StatusBar } from 'expo-status-bar';\nimport React, { useState, useEffect } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { TouchableOpacity } from 'react-native-gesture-handler';\nexport default function Auth(props) {\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      username = _useState2[0],\n      setUsername = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      password = _useState4[0],\n      setPassword = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      regView = _useState6[0],\n      setRegView = _useState6[1];\n\n  useEffect(function () {\n    getData();\n  }, []);\n\n  var toggleView = function toggleView() {\n    setRegView(!regView);\n  };\n\n  var auth = function auth() {\n    if (regView) {\n      fetch(\"http://192.168.0.175:8000/api/users/\", {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          username: username,\n          password: password\n        })\n      }).then(function (res) {\n        return res.json();\n      }).then(function (res) {\n        console.log(res);\n        setRegView(false);\n      }).catch(function (error) {\n        return console.log(error);\n      });\n    } else {\n      fetch(\"http://192.168.0.175:8000/auth/\", {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          username: username,\n          password: password\n        })\n      }).then(function (res) {\n        return res.json();\n      }).then(function (res) {\n        if (res.non_field_errors) {\n          console.log('allert');\n          Alert.alert('Error', 'Wrong Password/Username');\n        } else {\n          saveData(res.token);\n          props.navigation.navigate('MovieList');\n        }\n      }).catch(function (error) {\n        return console.log(error);\n      });\n    }\n  };\n\n  var saveData = function saveData(token) {\n    return _regeneratorRuntime.async(function saveData$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(AsyncStorage.setItem('MR_Token', token));\n\n          case 2:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var getData = function getData() {\n    var token;\n    return _regeneratorRuntime.async(function getData$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem('MR_Token'));\n\n          case 2:\n            token = _context2.sent;\n\n            if (token) {\n              console.log('token', token);\n              props.navigation.navigate('MovieList');\n            }\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return React.createElement(View, {\n    style: styles.container\n  }, React.createElement(Text, {\n    style: styles.label\n  }, \"Username\"), React.createElement(TextInput, {\n    style: styles.input,\n    placeholder: \"Username\",\n    onChangeText: function onChangeText(text) {\n      return setUsername(text);\n    },\n    value: username,\n    autoCapitalize: 'none'\n  }), React.createElement(Text, {\n    style: styles.label\n  }, \"Password\"), React.createElement(TextInput, {\n    style: styles.input,\n    placeholder: \"Password\",\n    onChangeText: function onChangeText(text) {\n      return setPassword(text);\n    },\n    value: password,\n    autoCapitalize: 'none',\n    secureTextEntry: true\n  }), React.createElement(Button, {\n    onPress: function onPress() {\n      return auth();\n    },\n    title: regView ? 'Register' : 'Login'\n  }), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return toggleView();\n    }\n  }, regView ? React.createElement(Text, {\n    style: styles.viewText\n  }, \"Already have an account? Go back to login\") : React.createElement(Text, {\n    style: styles.viewText\n  }, \"Don't have an account? Register here.\")));\n}\n\nAuth.navigationOptions = function (screenProps) {\n  return {\n    title: 'Login',\n    headerStyle: {\n      backgroundColor: 'orange'\n    },\n    headerTintColor: '#fff',\n    headerTitleStyle: {\n      fontWeight: 'bold',\n      fontSize: 24\n    }\n  };\n};\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#282C35',\n    padding: 10\n  },\n  label: {\n    fontSize: 24,\n    color: 'white',\n    padding: 10\n  },\n  input: {\n    backgroundColor: 'white',\n    fontSize: 24,\n    padding: 10,\n    margin: 10\n  },\n  viewText: {\n    color: 'white',\n    fontSize: 20,\n    paddingTop: 30,\n    paddingLeft: 10,\n    paddingRight: 10\n  }\n});","map":{"version":3,"sources":["F:/MovieRater/components/auth.js"],"names":["StatusBar","React","useState","useEffect","AsyncStorage","TouchableOpacity","Auth","props","username","setUsername","password","setPassword","regView","setRegView","getData","toggleView","auth","fetch","method","headers","body","JSON","stringify","then","res","json","console","log","catch","error","non_field_errors","Alert","alert","saveData","token","navigation","navigate","setItem","getItem","styles","container","label","input","text","viewText","navigationOptions","screenProps","title","headerStyle","backgroundColor","headerTintColor","headerTitleStyle","fontWeight","fontSize","StyleSheet","create","flex","padding","color","margin","paddingTop","paddingLeft","paddingRight"],"mappings":";;AAAA,SAASA,SAAT,QAA0B,iBAA1B;AACA,OAAOC,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,QAAyC,OAAzC;;;;;;;;;AAEA,OAAOC,YAAP,MAAyB,2CAAzB;AACA,SAASC,gBAAT,QAAiC,8BAAjC;AAEA,eAAe,SAASC,IAAT,CAAcC,KAAd,EAAqB;AAChC,kBAA+BL,QAAQ,CAAC,EAAD,CAAvC;AAAA;AAAA,MAAOM,QAAP;AAAA,MAAgBC,WAAhB;;AACA,mBAA+BP,QAAQ,CAAC,EAAD,CAAvC;AAAA;AAAA,MAAOQ,QAAP;AAAA,MAAgBC,WAAhB;;AACA,mBAA6BT,QAAQ,CAAC,KAAD,CAArC;AAAA;AAAA,MAAOU,OAAP;AAAA,MAAeC,UAAf;;AAEAV,EAAAA,SAAS,CAAC,YAAM;AACZW,IAAAA,OAAO;AACV,GAFQ,EAEP,EAFO,CAAT;;AAIA,MAAMC,UAAU,GAAG,SAAbA,UAAa,GAAM;AACrBF,IAAAA,UAAU,CAAC,CAACD,OAAF,CAAV;AACH,GAFD;;AAGA,MAAMI,IAAI,GAAG,SAAPA,IAAO,GAAM;AACf,QAAIJ,OAAJ,EAAY;AACRK,MAAAA,KAAK,yCAAyC;AAE1CC,QAAAA,MAAM,EAAE,MAFkC;AAG1CC,QAAAA,OAAO,EAAE;AACL,0BAAgB;AADX,SAHiC;AAM1CC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAACd,UAAAA,QAAQ,EAARA,QAAD;AAAUE,UAAAA,QAAQ,EAARA;AAAV,SAAf;AANoC,OAAzC,CAAL,CAOGa,IAPH,CAOQ,UAAAC,GAAG;AAAA,eAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,OAPX,EAQCF,IARD,CAQM,UAAAC,GAAG,EAAI;AACLE,QAAAA,OAAO,CAACC,GAAR,CAAYH,GAAZ;AACAX,QAAAA,UAAU,CAAC,KAAD,CAAV;AACH,OAXL,EAYCe,KAZD,CAYO,UAAAC,KAAK;AAAA,eAAIH,OAAO,CAACC,GAAR,CAAYE,KAAZ,CAAJ;AAAA,OAZZ;AAYoC,KAbxC,MAcK;AACDZ,MAAAA,KAAK,oCAAoC;AAErCC,QAAAA,MAAM,EAAE,MAF6B;AAGrCC,QAAAA,OAAO,EAAE;AACL,0BAAgB;AADX,SAH4B;AAMrCC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAACd,UAAAA,QAAQ,EAARA,QAAD;AAAUE,UAAAA,QAAQ,EAARA;AAAV,SAAf;AAN+B,OAApC,CAAL,CAOGa,IAPH,CAOQ,UAAAC,GAAG;AAAA,eAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,OAPX,EAQCF,IARD,CAQM,UAAAC,GAAG,EAAI;AACT,YAAIA,GAAG,CAACM,gBAAR,EAA0B;AACtBJ,UAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACAI,UAAAA,KAAK,CAACC,KAAN,CAAY,OAAZ,EAAqB,yBAArB;AAAgD,SAFpD,MAGK;AAACC,UAAAA,QAAQ,CAACT,GAAG,CAACU,KAAL,CAAR;AACF3B,UAAAA,KAAK,CAAC4B,UAAN,CAAiBC,QAAjB,CAA0B,WAA1B;AAAuC;AAC1C,OAdL,EAeCR,KAfD,CAeO,UAAAC,KAAK;AAAA,eAAIH,OAAO,CAACC,GAAR,CAAYE,KAAZ,CAAJ;AAAA,OAfZ;AAgBH;AACJ,GAjCD;;AAmCA,MAAMI,QAAQ,GAAG,SAAXA,QAAW,CAAOC,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CACP9B,YAAY,CAACiC,OAAb,CAAqB,UAArB,EAAiCH,KAAjC,CADO;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAjB;;AAIA,MAAMpB,OAAO,GAAG,SAAVA,OAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CACQV,YAAY,CAACkC,OAAb,CAAqB,UAArB,CADR;;AAAA;AACNJ,YAAAA,KADM;;AAEZ,gBAAIA,KAAJ,EAAW;AACPR,cAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBO,KAArB;AACA3B,cAAAA,KAAK,CAAC4B,UAAN,CAAiBC,QAAjB,CAA0B,WAA1B;AAAuC;;AAJ/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAhB;;AAOA,SACI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEG,MAAM,CAACC;AAApB,KACI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAED,MAAM,CAACE;AAApB,gBADJ,EAEI,oBAAC,SAAD;AACI,IAAA,KAAK,EAAEF,MAAM,CAACG,KADlB;AAEI,IAAA,WAAW,EAAC,UAFhB;AAGI,IAAA,YAAY,EAAE,sBAAAC,IAAI;AAAA,aAAElC,WAAW,CAACkC,IAAD,CAAb;AAAA,KAHtB;AAII,IAAA,KAAK,EAAEnC,QAJX;AAKI,IAAA,cAAc,EAAE;AALpB,IAFJ,EASI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE+B,MAAM,CAACE;AAApB,gBATJ,EAUI,oBAAC,SAAD;AACI,IAAA,KAAK,EAAEF,MAAM,CAACG,KADlB;AAEI,IAAA,WAAW,EAAC,UAFhB;AAGI,IAAA,YAAY,EAAE,sBAAAC,IAAI;AAAA,aAAEhC,WAAW,CAACgC,IAAD,CAAb;AAAA,KAHtB;AAII,IAAA,KAAK,EAAEjC,QAJX;AAKI,IAAA,cAAc,EAAE,MALpB;AAMI,IAAA,eAAe,EAAE;AANrB,IAVJ,EAkBI,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAE;AAAA,aAAIM,IAAI,EAAR;AAAA,KAAjB;AAA6B,IAAA,KAAK,EAAEJ,OAAO,GAAG,UAAH,GAAgB;AAA3D,IAlBJ,EAmBI,oBAAC,gBAAD;AAAkB,IAAA,OAAO,EAAE;AAAA,aAAMG,UAAU,EAAhB;AAAA;AAA3B,KACKH,OAAO,GAAG,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE2B,MAAM,CAACK;AAApB,iDAAH,GACR,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEL,MAAM,CAACK;AAApB,6CAFJ,CAnBJ,CADJ;AA2BH;;AAEDtC,IAAI,CAACuC,iBAAL,GAAyB,UAAAC,WAAW;AAAA,SAAK;AACrCC,IAAAA,KAAK,EAAE,OAD8B;AAErCC,IAAAA,WAAW,EAAC;AACPC,MAAAA,eAAe,EAAE;AADV,KAFyB;AAKrCC,IAAAA,eAAe,EAAE,MALoB;AAMrCC,IAAAA,gBAAgB,EAAE;AACdC,MAAAA,UAAU,EAAE,MADE;AAEdC,MAAAA,QAAQ,EAAE;AAFI;AANmB,GAAL;AAAA,CAApC;;AAYA,IAAMd,MAAM,GAAGe,UAAU,CAACC,MAAX,CAAkB;AAC/Bf,EAAAA,SAAS,EAAE;AACTgB,IAAAA,IAAI,EAAE,CADG;AAETP,IAAAA,eAAe,EAAE,SAFR;AAGTQ,IAAAA,OAAO,EAAE;AAHA,GADoB;AAO/BhB,EAAAA,KAAK,EAAE;AACHY,IAAAA,QAAQ,EAAE,EADP;AAEHK,IAAAA,KAAK,EAAE,OAFJ;AAGHD,IAAAA,OAAO,EAAE;AAHN,GAPwB;AAa/Bf,EAAAA,KAAK,EAAG;AACNO,IAAAA,eAAe,EAAE,OADX;AAENI,IAAAA,QAAQ,EAAE,EAFJ;AAGNI,IAAAA,OAAO,EAAE,EAHH;AAINE,IAAAA,MAAM,EAAE;AAJF,GAbuB;AAoB/Bf,EAAAA,QAAQ,EAAE;AACNc,IAAAA,KAAK,EAAC,OADA;AAENL,IAAAA,QAAQ,EAAE,EAFJ;AAGNO,IAAAA,UAAU,EAAE,EAHN;AAINC,IAAAA,WAAW,EAAE,EAJP;AAKNC,IAAAA,YAAY,EAAE;AALR;AApBqB,CAAlB,CAAf","sourcesContent":["import { StatusBar } from 'expo-status-bar';\r\nimport React, {useState, useEffect} from 'react';\r\nimport { StyleSheet, Text, View, FlatList , Image, Button, TextInput,Alert} from 'react-native';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport { TouchableOpacity } from 'react-native-gesture-handler';\r\n\r\nexport default function Auth(props) {\r\n    const [username,setUsername] = useState('')\r\n    const [password,setPassword] = useState('')\r\n    const [regView,setRegView] = useState(false)\r\n\r\n    useEffect(() => {\r\n        getData()\r\n    },[])\r\n\r\n    const toggleView = () => {\r\n        setRegView(!regView)\r\n    }\r\n    const auth = () => {\r\n        if (regView){\r\n            fetch(`http://192.168.0.175:8000/api/users/`, {\r\n            // fetch('http://127.0.0.1:8000/api/movies/', { \r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify({username,password})\r\n            }).then(res => res.json())\r\n            .then(res => {\r\n                    console.log(res)\r\n                    setRegView(false)\r\n                })\r\n            .catch(error => console.log(error))}\r\n        else {\r\n            fetch(`http://192.168.0.175:8000/auth/`, {\r\n            // fetch('http://127.0.0.1:8000/api/movies/', { \r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify({username,password})\r\n            }).then(res => res.json())\r\n            .then(res => {\r\n                if (res.non_field_errors) {\r\n                    console.log('allert')\r\n                    Alert.alert('Error', 'Wrong Password/Username')} \r\n                else {saveData(res.token)\r\n                    props.navigation.navigate('MovieList')}\r\n                })\r\n            .catch(error => console.log(error))\r\n        }\r\n    }      \r\n\r\n    const saveData = async (token) => {\r\n        await AsyncStorage.setItem('MR_Token', token)\r\n    }\r\n    \r\n    const getData = async () => {\r\n        const token = await AsyncStorage.getItem('MR_Token')\r\n        if (token) {\r\n            console.log('token', token)\r\n            props.navigation.navigate('MovieList')}\r\n    }\r\n\r\n    return (\r\n        <View style={styles.container}>\r\n            <Text style={styles.label}>Username</Text>\r\n            <TextInput\r\n                style={styles.input}\r\n                placeholder=\"Username\"\r\n                onChangeText={text=>setUsername(text)}\r\n                value={username}\r\n                autoCapitalize={'none'}\r\n            />\r\n            <Text style={styles.label}>Password</Text>\r\n            <TextInput\r\n                style={styles.input}\r\n                placeholder=\"Password\"\r\n                onChangeText={text=>setPassword(text)}\r\n                value={password}\r\n                autoCapitalize={'none'}\r\n                secureTextEntry={true}\r\n            />\r\n            <Button onPress={()=>auth()} title={regView ? 'Register' : 'Login'}/>\r\n            <TouchableOpacity onPress={() => toggleView()}>\r\n                {regView ? <Text style={styles.viewText}>Already have an account? Go back to login</Text>: \r\n                <Text style={styles.viewText}>Don't have an account? Register here.</Text>}\r\n                \r\n            </TouchableOpacity>\r\n        </View>\r\n    );\r\n}\r\n\r\nAuth.navigationOptions = screenProps => ({\r\n    title: 'Login',\r\n    headerStyle:{\r\n         backgroundColor: 'orange'\r\n    },\r\n    headerTintColor: '#fff',\r\n    headerTitleStyle: {\r\n        fontWeight: 'bold',\r\n        fontSize: 24\r\n    },\r\n})\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#282C35',\r\n    padding: 10\r\n  },\r\n  \r\n  label: {\r\n      fontSize: 24,\r\n      color: 'white',\r\n      padding: 10\r\n  },\r\n\r\n  input : {\r\n    backgroundColor: 'white',\r\n    fontSize: 24,\r\n    padding: 10,\r\n    margin: 10\r\n  },\r\n\r\n  viewText: {\r\n      color:'white',\r\n      fontSize: 20,\r\n      paddingTop: 30,\r\n      paddingLeft: 10,\r\n      paddingRight: 10\r\n  },\r\n});\r\n"]},"metadata":{},"sourceType":"module"}